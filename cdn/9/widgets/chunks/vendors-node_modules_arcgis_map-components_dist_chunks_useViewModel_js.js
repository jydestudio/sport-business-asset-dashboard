/*! For license information please see vendors-node_modules_arcgis_map-components_dist_chunks_useViewModel_js.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-node_modules_arcgis_map-components_dist_chunks_useViewModel_js"],{8887:(e,t,n)=>{n.d(t,{XN:()=>p,_i:()=>c,uZ:()=>l,zR:()=>h});var i,o=n(6343),s=n(6754),r=n(8015);async function a(){return i??(i=(0,s.importCoreReactiveUtils)()),await i}var c=(e,t)=>(t,n)=>d(t,e,n),l=class extends o.Wz{constructor(e,t,n){super(e),this._loadAccessor=t,this._options=n,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(h.makeGetterProxy(e,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches)),(0,o.Yd)(e,(e=>{e&&(this._instancePropName=e)}),this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){this.reactiveUtils=await a();const e=this.component,t=this._gatherParameters(),n=this._options?.editConstructorProperties?.call(e,t)??t,i=n instanceof Promise?await n:n,o=e,s="string"==typeof this._instancePropName?o[this._instancePropName]:void 0;null!=s&&s!==this.exports?(this._instance=s,s.set(i)):this._instance=await this._createInstance(i),e.manager.destroyed||(h.watchComponentUpdates(this,this._instance,this._watchedProperties),h.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,(([e,t])=>[t,this.component[e]])).filter((([,e])=>void 0!==e)))}async _createInstance(e){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(e):await this._loadAccessor(e)}_isAccessorConstructor(e){return"prototype"in e&&"declaredClass"in e.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},d=(0,o.W7)(l),h={makeGetterProxy:(e,t,n,i)=>new Proxy({},{has:(e,t)=>"string"==typeof t||t in e,get:(i,s)=>{const r=Reflect.get(i,s);if("symbol"==typeof s||s in Promise.prototype)return r;return s in i||!(n?.value??!0)?r:t.has(s)?void 0:(0,o.Nh)(e,(e=>{void 0!==e&&t.set(e.key,s)}),r)}}),watchComponentUpdates(e,t,n){function i(e,i){const o=n.get(i),s=t[o];return"boolean"==typeof s&&o!==i&&i.toLowerCase().includes("disable")?!s:s}const o=(e,i,o)=>{const r=n.get(o),a=t[r],c="boolean"==typeof a&&r!==o&&o.toLowerCase().includes("disable");if((c?!a:s.manager.isLit?a??void 0:a)===e)return e;t[r]=c?!e:e;const l=t[r];return c?!l:l},s=e.component,r=s.manager.internals;n.forEach(((e,t)=>{r.accessorGetter[t]=i,r.accessorSetter[t]=o}))},watchAccessorUpdates(e,t,n){const{component:i}=e,s=i,r=t,a=function(e){const t=e,n=Object.entries(t.__accessor__?.metadata??{});return new Set(n.filter((([e,t])=>!0===t?.readOnly)).map((([e])=>e)))}(t);(0,o.Gn)((()=>n.forEach(((e,t)=>{if(a.has(e))return;const n=s[t];let o=r[e];i.manager.isLit&&(o??(o=void 0));const c="boolean"==typeof n&&e!==t&&t.toLowerCase().includes("disable")?!n:n;null!=c&&o!==c&&(r[e]=c)})))),e.onLifecycle((()=>{if(!t.destroyed)return Array.from(n,(([t,n])=>e.reactiveUtils.watch((()=>r[n]),(()=>{const e=r[n],i="boolean"==typeof e&&n!==t&&t.toLowerCase().includes("disable")?!e:e;(0,o.WV)((()=>{s[t]=i}))}),{initial:!0})))}))},reEmitAccessorEvents(e,t,n,i){if(!("on"in t&&"function"==typeof t.on))return;const o=Object.entries(e.component).map((([e,t])=>{const n=t;if(!e.startsWith(i)||e===i||"object"!=typeof n||null===n||!("emit"in n)||"function"!=typeof n.emit)return;const o=n.emit,s=e.slice(i.length);return[(0,r.j1)(s).toLowerCase(),o]})).filter(r.EA);if(0===o.length)return;const s=t,a=()=>s;e.onLifecycle((()=>{if(!t.destroyed)return o.map((([e,t])=>n.on(a,e,t)))}))},async reCreate(e,t){const n=t.manager.useRefSync(e);void 0!==n&&await n.reCreate()}};function p(e,t){const n=(0,o.Gk)();const i=n.manager,s=a();i.onLoaded((()=>{s.then((n=>i.onLifecycle((()=>n.on(e,t,r.emit)))))}));const r=n.constructor.$createEvent();return r}},9840:(e,t,n)=>{function i(e,t){Array.isArray(t)?e._watchHandles=[...e._watchHandles,...t]:e._watchHandles.push(t)}function o(e){e.el.childElem&&(e.el.childElem.ownedBy=e.el);const t=function({el:e}){for(let t=e.parentElement;t;t=t?.parentElement??null){if(s.has(t.tagName.toLowerCase()))return t;if("ownedBy"in t&&t.ownedBy instanceof HTMLElement&&s.has(t.ownedBy.tagName.toLowerCase()))return t.ownedBy}}(e);if(!t){const t=y(e.referenceElement);return t?(l(t,e,!0),t):void v(e)}return function(e,t){if(e!==t)return!1;const n=e.tagName.toLowerCase();return"arcgis-expand"===n||"arcgis-placement"===n}(t,e.el.parent)||(e.el.parent=t,"arcgis-expand"===t.tagName.toLowerCase()?a(t,e):"arcgis-placement"===t.tagName.toLowerCase()?c(t,e):l(t,e,!1)),t}n.d(t,{a:()=>o,b:()=>i,c:()=>p,d:()=>d,e:()=>m,f:()=>h,i:()=>u,p:()=>w,r:()=>f});const s=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function r(e,t,n="arcgisReady"){const i=e;if("boolean"==typeof i.view?.ready)t(i.view);else{let i=function(o){o.target===e&&(r(e,t,n),e.removeEventListener(n,i))};e.addEventListener(n,i)}}const a=(e,t)=>r(e,(n=>{t.el.childElem&&null!=e.content&&e.content.append(t.el.childElem),e.expandIcon=t.icon||t.widget?.icon||e.expandIcon,t.position=e.position,t.el.view=n})),c=(e,t)=>r(e,(n=>{t.el.childElem&&t.el.append(t.el.childElem),t.position=e.position,t.el.view=n})),l=(e,t,n)=>r(e,(i=>{n?v(t):t.el.childElem&&function(e,t){const n=t.el.childElem??t.el,i=[...e.children],o={};for(const e of i){const t=e.getAttribute("position")??"manual";o[t]??=[],o[t].push({child:e,position:t,index:i.indexOf(e)})}const s=o[t.position??"manual"]?.findIndex((({child:e})=>e===t.el)),r=e.view.ui;r.remove(n),r.add(n,{position:t.position,index:s})}(e,t),t.el.view=i}),"arcgisViewReadyChange");function d(e){let t=!1,n=e.el.view;const i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e.el),"view")??{get:()=>n,set:e=>n=e};Object.defineProperty(e.el,"view",{get:i.get.bind(e.el),set:n=>{i.set.call(e.el,n),n&&!t&&(t=!0,e.arcgisReady.emit())},configurable:!0,enumerable:!0}),n&&(e.el.view=n)}function h(e){return null==e||""===e}function p(e,t){return null!=t&&e?.position===t.position&&e?.heading===t.heading&&e?.tilt===t.tilt&&e?.fov===t.fov}function u(e,t){return void 0===t||e?.targetGeometry!==t?.targetGeometry||e?.rotation!==t?.rotation||e?.scale!==t?.scale}function m(e,t){return w(t?.center,e)}function w(e,t){if("string"==typeof t)return w(e,t.split(",").map(Number));if(!e)return t;if(Array.isArray(t)){const n=t[0],i=t[1],o=t.length>2?t[2]:void 0;if(n!==e.longitude||i!==e.latitude||o!==e.z)return t}else if(t&&!e?.equals(t))return t}async function f(e,t){null!=t&&("string"==typeof t?e.el.view=await async function(e){const t=y(e);return await new Promise((e=>{"boolean"==typeof t?.view?.ready?e(t.view):t&&t.addEventListener("arcgisViewReadyChange",(()=>e(t.view)),{once:!0})}))}(t):e.widget&&(e.el.view=t.view))}function v(e){e.el.childElem&&(e.el.shadowRoot??e.el).append(e.el.childElem)}function y(e){return"string"!=typeof e?e??void 0:(e.includes("#")||e.includes(".")||e.includes("[")?void 0:document.querySelector(`#${e}`))??document.querySelector(e)??void 0}},1881:(e,t,n)=>{n.d(t,{V:()=>d,a:()=>l,u:()=>c});var i=n(8695),o=n(8019),s=n(3987),r=n(4312),a=n(9840);const c=(0,i.yr)(o.g),l=e=>h(e);class d extends i.Wz{constructor(e){super(e),this._view$=(0,s.signal)(void 0),this._viewDestroyHandle=void 0,this._arcgisReadyEmitted=!1;const{el:t}=e,n=t.view;this.setProvisionalExports(void 0),Object.defineProperty(t,"view",{get:()=>this._view$.value,set:e=>{if(this.exports===e)return;const n=t.view;this._view$.value=e,this.exports=e,this.component.requestUpdate("view",n),!this._arcgisReadyEmitted&&null!=e&&(this._arcgisReadyEmitted=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),e!==t&&Object.defineProperty(e,"view",{get:()=>t.view,set:e=>{t.view=e}}),queueMicrotask((()=>{n&&(t.view=n)}))}hostConnected(){this._viewDestroyHandle??=r.when((()=>this._view$.value?.destroyed),(()=>{this.component.destroy?.().catch(console.error)}),{sync:!0}),this.component.manager.loadedCalled&&(0,a.a)(this.component)}hostLoad(){this.component.manager.destroyed||this._watchMetaProperties()}hostLoaded(){const{el:e}=this.component,t=e.shadowRoot?.firstElementChild??e.firstElementChild??void 0;e.childElem=t??e.childElem,e.isConnected&&(0,a.a)(this.component)}hostDisconnected(){"object"==typeof this.component.el.childElem&&this._view$.value?.ui?.remove(this.component.el.childElem)}hostDestroy(){this._viewDestroyHandle?.remove()}_watchMetaProperties(){(0,i.wB)(this.component,"position",(e=>{null!=this.component.el.childElem&&"string"==typeof e&&(0,a.a)(this.component)})),(0,i.wB)(this.component,"referenceElement",(()=>(0,a.a)(this.component)))}}const h=(0,i.W7)(d)},7459:(e,t,n)=>{n.d(t,{m:()=>r});var i=n(8695),o=n(8887),s=n(1881);const r=(e,t)=>(t,n)=>c(t,e,n);class a extends o.uZ{constructor(){super(...arguments),this.viewController=new s.V(this.component),this._viewWatchHandle=void 0}async hostLoad(){await super.hostLoad(),this._viewWatchHandle=this.reactiveUtils.watch((()=>this.component.el.view),(e=>{this._instance.view=e,this._instance.map=e?.map}),{sync:!0,initial:!0})}hostDestroy(){this._viewWatchHandle?.remove(),super.hostDestroy()}}const c=(0,i.W7)(a)}}]);