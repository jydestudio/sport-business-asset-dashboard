/*! For license information please see vendors-node_modules_arcgis_map-components_dist_chunks_useWidget_js.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-node_modules_arcgis_map-components_dist_chunks_useWidget_js"],{8887:(e,t,i)=>{i.d(t,{XN:()=>p,_i:()=>a,uZ:()=>l,zR:()=>d});var n,s=i(6343),o=i(6754),r=i(8015);async function c(){return n??(n=(0,o.importCoreReactiveUtils)()),await n}var a=(e,t)=>(t,i)=>h(t,e,i),l=class extends s.Wz{constructor(e,t,i){super(e),this._loadAccessor=t,this._options=i,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(d.makeGetterProxy(e,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches)),(0,s.Yd)(e,(e=>{e&&(this._instancePropName=e)}),this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){this.reactiveUtils=await c();const e=this.component,t=this._gatherParameters(),i=this._options?.editConstructorProperties?.call(e,t)??t,n=i instanceof Promise?await i:i,s=e,o="string"==typeof this._instancePropName?s[this._instancePropName]:void 0;null!=o&&o!==this.exports?(this._instance=o,o.set(n)):this._instance=await this._createInstance(n),e.manager.destroyed||(d.watchComponentUpdates(this,this._instance,this._watchedProperties),d.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,(([e,t])=>[t,this.component[e]])).filter((([,e])=>void 0!==e)))}async _createInstance(e){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(e):await this._loadAccessor(e)}_isAccessorConstructor(e){return"prototype"in e&&"declaredClass"in e.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},h=(0,s.W7)(l),d={makeGetterProxy:(e,t,i,n)=>new Proxy({},{has:(e,t)=>"string"==typeof t||t in e,get:(n,o)=>{const r=Reflect.get(n,o);if("symbol"==typeof o||o in Promise.prototype)return r;return o in n||!(i?.value??!0)?r:t.has(o)?void 0:(0,s.Nh)(e,(e=>{void 0!==e&&t.set(e.key,o)}),r)}}),watchComponentUpdates(e,t,i){function n(e,n){const s=i.get(n),o=t[s];return"boolean"==typeof o&&s!==n&&n.toLowerCase().includes("disable")?!o:o}const s=(e,n,s)=>{const r=i.get(s),c=t[r],a="boolean"==typeof c&&r!==s&&s.toLowerCase().includes("disable");if((a?!c:o.manager.isLit?c??void 0:c)===e)return e;t[r]=a?!e:e;const l=t[r];return a?!l:l},o=e.component,r=o.manager.internals;i.forEach(((e,t)=>{r.accessorGetter[t]=n,r.accessorSetter[t]=s}))},watchAccessorUpdates(e,t,i){const{component:n}=e,o=n,r=t,c=function(e){const t=e,i=Object.entries(t.__accessor__?.metadata??{});return new Set(i.filter((([e,t])=>!0===t?.readOnly)).map((([e])=>e)))}(t);(0,s.Gn)((()=>i.forEach(((e,t)=>{if(c.has(e))return;const i=o[t];let s=r[e];n.manager.isLit&&(s??(s=void 0));const a="boolean"==typeof i&&e!==t&&t.toLowerCase().includes("disable")?!i:i;null!=a&&s!==a&&(r[e]=a)})))),e.onLifecycle((()=>{if(!t.destroyed)return Array.from(i,(([t,i])=>e.reactiveUtils.watch((()=>r[i]),(()=>{const e=r[i],n="boolean"==typeof e&&i!==t&&t.toLowerCase().includes("disable")?!e:e;(0,s.WV)((()=>{o[t]=n}))}),{initial:!0})))}))},reEmitAccessorEvents(e,t,i,n){if(!("on"in t&&"function"==typeof t.on))return;const s=Object.entries(e.component).map((([e,t])=>{const i=t;if(!e.startsWith(n)||e===n||"object"!=typeof i||null===i||!("emit"in i)||"function"!=typeof i.emit)return;const s=i.emit,o=e.slice(n.length);return[(0,r.j1)(o).toLowerCase(),s]})).filter(r.EA);if(0===s.length)return;const o=t,c=()=>o;e.onLifecycle((()=>{if(!t.destroyed)return s.map((([e,t])=>i.on(c,e,t)))}))},async reCreate(e,t){const i=t.manager.useRefSync(e);void 0!==i&&await i.reCreate()}};function p(e,t){const i=(0,s.Gk)();const n=i.manager,o=c();n.onLoaded((()=>{o.then((i=>n.onLifecycle((()=>i.on(e,t,r.emit)))))}));const r=i.constructor.$createEvent();return r}},9840:(e,t,i)=>{function n(e,t){Array.isArray(t)?e._watchHandles=[...e._watchHandles,...t]:e._watchHandles.push(t)}function s(e){e.el.childElem&&(e.el.childElem.ownedBy=e.el);const t=function({el:e}){for(let t=e.parentElement;t;t=t?.parentElement??null){if(o.has(t.tagName.toLowerCase()))return t;if("ownedBy"in t&&t.ownedBy instanceof HTMLElement&&o.has(t.ownedBy.tagName.toLowerCase()))return t.ownedBy}}(e);if(!t){const t=_(e.referenceElement);return t?(l(t,e,!0),t):void y(e)}return function(e,t){if(e!==t)return!1;const i=e.tagName.toLowerCase();return"arcgis-expand"===i||"arcgis-placement"===i}(t,e.el.parent)||(e.el.parent=t,"arcgis-expand"===t.tagName.toLowerCase()?c(t,e):"arcgis-placement"===t.tagName.toLowerCase()?a(t,e):l(t,e,!1)),t}i.d(t,{a:()=>s,b:()=>n,c:()=>p,d:()=>h,e:()=>u,f:()=>d,i:()=>m,p:()=>w,r:()=>f});const o=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function r(e,t,i="arcgisReady"){const n=e;if("boolean"==typeof n.view?.ready)t(n.view);else{let n=function(s){s.target===e&&(r(e,t,i),e.removeEventListener(i,n))};e.addEventListener(i,n)}}const c=(e,t)=>r(e,(i=>{t.el.childElem&&null!=e.content&&e.content.append(t.el.childElem),e.expandIcon=t.icon||t.widget?.icon||e.expandIcon,t.position=e.position,t.el.view=i})),a=(e,t)=>r(e,(i=>{t.el.childElem&&t.el.append(t.el.childElem),t.position=e.position,t.el.view=i})),l=(e,t,i)=>r(e,(n=>{i?y(t):t.el.childElem&&function(e,t){const i=t.el.childElem??t.el,n=[...e.children],s={};for(const e of n){const t=e.getAttribute("position")??"manual";s[t]??=[],s[t].push({child:e,position:t,index:n.indexOf(e)})}const o=s[t.position??"manual"]?.findIndex((({child:e})=>e===t.el)),r=e.view.ui;r.remove(i),r.add(i,{position:t.position,index:o})}(e,t),t.el.view=n}),"arcgisViewReadyChange");function h(e){let t=!1,i=e.el.view;const n=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e.el),"view")??{get:()=>i,set:e=>i=e};Object.defineProperty(e.el,"view",{get:n.get.bind(e.el),set:i=>{n.set.call(e.el,i),i&&!t&&(t=!0,e.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(e.el.view=i)}function d(e){return null==e||""===e}function p(e,t){return null!=t&&e?.position===t.position&&e?.heading===t.heading&&e?.tilt===t.tilt&&e?.fov===t.fov}function m(e,t){return void 0===t||e?.targetGeometry!==t?.targetGeometry||e?.rotation!==t?.rotation||e?.scale!==t?.scale}function u(e,t){return w(t?.center,e)}function w(e,t){if("string"==typeof t)return w(e,t.split(",").map(Number));if(!e)return t;if(Array.isArray(t)){const i=t[0],n=t[1],s=t.length>2?t[2]:void 0;if(i!==e.longitude||n!==e.latitude||s!==e.z)return t}else if(t&&!e?.equals(t))return t}async function f(e,t){null!=t&&("string"==typeof t?e.el.view=await async function(e){const t=_(e);return await new Promise((e=>{"boolean"==typeof t?.view?.ready?e(t.view):t&&t.addEventListener("arcgisViewReadyChange",(()=>e(t.view)),{once:!0})}))}(t):e.widget&&(e.el.view=t.view))}function y(e){e.el.childElem&&(e.el.shadowRoot??e.el).append(e.el.childElem)}function _(e){return"string"!=typeof e?e??void 0:(e.includes("#")||e.includes(".")||e.includes("[")?void 0:document.querySelector(`#${e}`))??document.querySelector(e)??void 0}},4288:(e,t,i)=>{i.d(t,{m:()=>r});var n=i(8695),s=i(8887),o=i(9840);const r=(e,t)=>(t,i)=>a(t,e,i);class c extends s.uZ{constructor(e,t,i){super(e,t,i),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:s.zR.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.loadedCalled&&(0,o.a)(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),this.onLifecycle((()=>this.reactiveUtils.watch((()=>this._instance.viewModel),(e=>{this.component.viewModel=e}),{initial:!0})));const e=this._instance.viewModel;"object"==typeof e&&(s.zR.watchComponentUpdates(this,e,this._watchedViewModelProperties),s.zR.watchAccessorUpdates(this,e,this._watchedViewModelProperties));const t=Object.entries(this._watchedVisibleElementsProperties);t.length>0&&this.onLifecycle((()=>t.map((([e,t])=>{let i,s=this._instance.visibleElements??{};for(const e of t.slice(0,-1)){if("object"!=typeof s[e]||null===s[e]){i=!!s[e];break}s=s[e]}void 0===i&&(i=!!(s[t.slice(-1)[0]]??1)),e.startsWith("hide");const o=e.startsWith("hide")||e.startsWith("show")?e.startsWith("hide"):i,r=this.component;return"boolean"==typeof r[e]?this._updateWidgetVisibleElement(t,r[e],o):r[e]=!1,(0,n.wB)(this.component,e,(e=>this._updateWidgetVisibleElement(t,e,o)))}))))}_updateWidgetVisibleElement(e,t,i){let n=this._instance.visibleElements??{};for(const t of e.slice(0,-1))("object"!=typeof n[t]||null===n[t])&&(n[t]={}),n=n[t];const s=!!(i?!t:t);n[e.at(-1)]=s}hostLoaded(){const{el:e}=this.component;e.childElem??=document.createElement("div"),this._instance.container=e.childElem;let t=!1;const i=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view??this._instance.viewModel?.view,set:e=>{"view"in this._instance||"object"!=typeof this._instance.viewModel?this._instance.view=e:this._instance.viewModel.view=e,"map"in this._instance||"object"!=typeof this._instance.viewModel?this._instance.map=e.map:this._instance.viewModel.map=e.map,this._watchViewDestroy(),e&&!t&&(t=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(this._instance.view=i),this.component.el.isConnected&&((0,o.a)(this.component),this._watchViewDestroy())}hostDisconnected(){"object"==typeof this.component.el.childElem&&this.component.el.view?.ui?.remove(this.component.el.childElem)}hostDestroy(){super.hostDestroy(),this._watchViewDestroyHandle?.remove()}_watchMetaProperties(){(0,n.wB)(this.component,"position",(e=>{null!=this.component.el.childElem&&"string"==typeof e&&(0,o.a)(this.component)})),(0,n.wB)(this.component,"referenceElement",(()=>(0,o.a)(this.component)))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,t)=>"string"==typeof t||Reflect.has(e,t),get:(e,t)=>{if("symbol"==typeof t||t in Promise.prototype)return Reflect.get(e,t);const i=[t],s=this._makeRecursiveProxy(i);return(0,n.Yd)(this.component,(e=>{const t=e;this.component[t]=!1,this._watchedVisibleElementsProperties[t]=i}),s)}})}_makeRecursiveProxy(e){const t=new Proxy({},{get:(i,n)=>{const s=Reflect.get(i,n);return"symbol"==typeof n||n in Promise.prototype?s:(e.push(n),t)}});return t}_watchViewDestroy(){this._watchViewDestroyHandle?.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when((()=>!0===this.component.el.view?.destroyed),(()=>{this.component.destroy().catch(console.error)}),{sync:!0})}}const a=(0,n.W7)(c)}}]);