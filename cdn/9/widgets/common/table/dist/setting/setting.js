System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-arcgis","jimu-for-builder","jimu-ui/basic/list-tree","jimu-ui/advanced/data-source-selector","jimu-theme","jimu-layouts/layout-runtime","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-core/react"],(function(e,t){var a={},i={},l={},n={},o={},s={},r={},c={},d={},u={},m={},g={};return{setters:[function(e){a.CONSTANTS=e.CONSTANTS,a.DataSourceComponent=e.DataSourceComponent,a.DataSourceManager=e.DataSourceManager,a.DataSourceTypes=e.DataSourceTypes,a.Immutable=e.Immutable,a.JSAPILayerTypes=e.JSAPILayerTypes,a.JimuFieldType=e.JimuFieldType,a.React=e.React,a.ReactRedux=e.ReactRedux,a.classNames=e.classNames,a.css=e.css,a.dataSourceUtils=e.dataSourceUtils,a.defaultMessages=e.defaultMessages,a.hooks=e.hooks,a.jsx=e.jsx,a.polished=e.polished},function(e){i.Alert=e.Alert,i.Button=e.Button,i.Checkbox=e.Checkbox,i.ConfirmDialog=e.ConfirmDialog,i.DistanceUnits=e.DistanceUnits,i.Icon=e.Icon,i.Label=e.Label,i.Loading=e.Loading,i.LoadingType=e.LoadingType,i.PanelHeader=e.PanelHeader,i.Radio=e.Radio,i.Select=e.Select,i.Switch=e.Switch,i.TextInput=e.TextInput,i.Tooltip=e.Tooltip,i.defaultMessages=e.defaultMessages},function(e){l.JimuLayerViewSelector=e.JimuLayerViewSelector,l.MapWidgetSelector=e.MapWidgetSelector,l.SettingRow=e.SettingRow,l.SettingSection=e.SettingSection,l.SidePopper=e.SidePopper},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){o.builderAppSync=e.builderAppSync},function(e){s.List=e.List,s.Tree=e.Tree,s.TreeAlignmentType=e.TreeAlignmentType,s.TreeItemActionType=e.TreeItemActionType},function(e){r.DataSourceSelector=e.DataSourceSelector,r.FieldSelector=e.FieldSelector,r.FieldSelectorWithFullTextIndex=e.FieldSelectorWithFullTextIndex,r.dataComponentsUtils=e.dataComponentsUtils},function(e){c.useTheme=e.useTheme,c.useTheme2=e.useTheme2},function(e){d.defaultMessages=e.defaultMessages},function(e){u.FontStyle=e.FontStyle,u.InputUnit=e.InputUnit},function(e){m.ThemeColorPicker=e.ThemeColorPicker},function(e){g.Fragment=e.Fragment}],execute:function(){e((()=>{var e={31027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},26490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.6 8.6 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.6 8.6 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.7 8.7 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3q-1.088 0-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987" clip-rule="evenodd"></path></svg>'},93303:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},73529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},30655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},94064:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .54.54 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.54.54 0 0 1 0 .738" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},23662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},778:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.829 2.535a.909.909 0 0 0-1.657 0L2.291 13.356a.456.456 0 0 0 .831.377L4.818 10h6.365l1.696 3.733a.456.456 0 0 0 .831-.377zM5.272 9 8 3l2.729 6z" clip-rule="evenodd"></path></svg>'},53195:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M0 3.307V15l5.722-2.117 4.528 1.937L16 12.693V1l-5.722 2.117L5.75 1.18zm1 10.286V3.974l4-1.48v9.619zm5-1.65 4 1.711V4.057L6 2.346zm5 1.563V3.887l4-1.48v9.619z" clip-rule="evenodd"></path></svg>'},72529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.027 0A8 8 0 1 1 0 8a8 8 0 0 1 8.027-8m-2.07 1.303A7 7 0 0 0 2.256 4h1.6a8.3 8.3 0 0 1 2.103-2.697M3.453 5H1.674a7 7 0 0 0-.656 2.5H3.01q.06-1.336.441-2.5m.56 2.5a8.1 8.1 0 0 1 .5-2.5H7.5v2.5zm-1.001 1H1.018c.062.89.291 1.733.656 2.5h1.778a9.3 9.3 0 0 1-.441-2.5M4.512 11a8.1 8.1 0 0 1-.5-2.5H7.5V11zm-.657 1h-1.6a7 7 0 0 0 3.702 2.697A8.3 8.3 0 0 1 3.855 12M7.5 14.61V12H4.985q.869 1.516 2.515 2.61M7.5 4V1.39Q5.854 2.484 4.985 4zm2.543 10.697A7 7 0 0 0 13.745 12h-1.6a8.3 8.3 0 0 1-2.102 2.697M12.548 11h1.778c.365-.767.594-1.61.656-2.5H12.99a9.3 9.3 0 0 1-.441 2.5m-.56-2.5a8.1 8.1 0 0 1-.5 2.5H8.5V8.5zm1.001-1h1.993a7 7 0 0 0-.656-2.5h-1.778q.381 1.164.441 2.5M11.488 5q.434 1.146.5 2.5H8.5V5zm.657-1h1.6a7 7 0 0 0-3.703-2.697Q11.408 2.473 12.145 4M8.5 1.39Q10.146 2.484 11.015 4H8.5zM8.5 12h2.515q-.869 1.516-2.515 2.61z" clip-rule="evenodd"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},8377:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA5IiBoZWlnaHQ9IjcwIiB2aWV3Qm94PSIwIDAgMTA5IDcwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjkzIiBoZWlnaHQ9IjU0IiByeD0iMiIgZmlsbD0iIzI4MjgyOCIvPg0KPHJlY3QgeD0iMzIiIHk9IjI0IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iMzIiIHk9IjMyIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMzIiIHk9IjM5IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMzIiIHk9IjQ2IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMzIiIHk9IjUzIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjI0IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iMTIiIHk9IjMyIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjM5IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjQ2IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjUzIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjEyIiB3aWR0aD0iMzgiIGhlaWdodD0iOCIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMTQiIHk9IjE0IiB3aWR0aD0iMjgiIGhlaWdodD0iNCIgZmlsbD0iIzE4MTgxOCIvPg0KPHBhdGggZD0iTTQ0IDE1SDQ4TDQ2IDE3TDQ0IDE1WiIgZmlsbD0iIzE4MTgxOCIvPg0KPHJlY3QgeD0iNTIiIHk9IjI0IiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iNTIiIHk9IjMyIiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjM5IiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjQ2IiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjUzIiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjI0IiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iNzMiIHk9IjMyIiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjM5IiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjQ2IiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjUzIiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPC9zdmc+DQo="},79226:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA5IiBoZWlnaHQ9IjcwIiB2aWV3Qm94PSIwIDAgMTA5IDcwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjkzIiBoZWlnaHQ9IjU0IiByeD0iMiIgZmlsbD0iIzI4MjgyOCIvPg0KPHJlY3QgeD0iMzIiIHk9IjI0IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iMzIiIHk9IjMyIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMzIiIHk9IjM5IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMzIiIHk9IjQ2IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMzIiIHk9IjUzIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjI0IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iMTIiIHk9IjMyIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjM5IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjQ2IiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjUzIiB3aWR0aD0iMTYiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjE5IiB3aWR0aD0iODUiIGhlaWdodD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTIiIHk9IjE5IiB3aWR0aD0iMTYiIGhlaWdodD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMTIiIHk9IjEzIiB3aWR0aD0iMTYiIGhlaWdodD0iNiIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMzAiIHk9IjEzIiB3aWR0aD0iMTYiIGhlaWdodD0iNiIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNDgiIHk9IjEzIiB3aWR0aD0iMTYiIGhlaWdodD0iNiIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjI0IiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iNTIiIHk9IjMyIiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjM5IiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjQ2IiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNTIiIHk9IjUzIiB3aWR0aD0iMTciIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjI0IiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iNzMiIHk9IjMyIiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjM5IiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjQ2IiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iNzMiIHk9IjUzIiB3aWR0aD0iMjQiIGhlaWdodD0iNSIgZmlsbD0iIzM2MzYzNiIvPg0KPC9zdmc+DQo="},62686:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=a},68972:e=>{"use strict";e.exports=g},4108:e=>{"use strict";e.exports=o},41496:e=>{"use strict";e.exports=d},1888:e=>{"use strict";e.exports=c},14321:e=>{"use strict";e.exports=i},13089:e=>{"use strict";e.exports=r},79298:e=>{"use strict";e.exports=l},15562:e=>{"use strict";e.exports=u},54337:e=>{"use strict";e.exports=m},98640:e=>{"use strict";e.exports=s}},t={};function p(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,p),l.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var a in t)p.o(t,a)&&!p.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="";var I={};return p.p=window.jimuConfig.baseUrl,(()=>{"use strict";p.r(I),p.d(I,{__set_webpack_public_path__:()=>Ze,default:()=>Ke});var e,t,a,i,l,n,o=p(79244),s=p(14321),r=p(79298),c=p(62686);!function(e){e.Layer="LAYER",e.Map="MAP"}(e||(e={})),function(e){e.Dropdown="DROPDOWN",e.Tabs="TABS"}(t||(t={})),function(e){e.Single="SINGLE",e.Multiple="MULTIPLE"}(a||(a={})),function(e){e.Webmap="WEBMAP",e.Custom="CUSTOM"}(i||(i={})),function(e){e.Fit="FIT",e.Fixed="FIXED"}(l||(l={})),function(e){e.View="VIEW",e.Add="ADD"}(n||(n={}));const d={newSheet:"New sheet",sheetStyle:"Arrangement style",layerConfig:"Sheet configuration",enableAttachments:"Show attachments",enableSearch:"Search",searchFields:"Select searching fields",fullMatch:"Exact match",allowCsv:"Allow exporting to CSV",enableSelect:"Select records",enableEdit:"Allow editing",showCount:"Show record count",enableRefresh:"Refresh",configFields:"Configure fields",dropdown:"Dropdown",configTips:"Select fields for initial display",tableBlankStatus:'Click the "{SheetString}" button to add and configure data sheets.',selectFields:"Select fields",checkAll:"Check all",uncheckAll:"Uncheck all",editable:"Editable",editableCount:"{count} Editable",tableOptions:"Table options",columnSize:"Column sizing",fitToData:"Fit to data",columnWidth:"Column width",updateText:"Last update text",layerHonorSetting:"Use layer settings",layerCustomize:"Customize",deleteRecords:"Delete records",noMapSelectedTips:"Select a map for further configurations.",changeModeConfirmTitle:"Are you sure you want to switch the mode?",changeModeConfirmTips:"You will lose the settings configured.",enableMapExtentFilter:"Filter by map extent",selectLayers:"Select layers",enableSyncVisibilities:"Synchronize with layer visibilities",displayRuntimeLayers:"Display layers added at runtime"};var u=p(4108),m=p(23662),g=p.n(m),b=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const y=e=>{const t=window.SVG,{className:a}=e,i=b(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:g()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var f=p(98640),S=p(62838),v=p.n(S);const h={overrideItemBlockInfo:({itemBlockInfo:e},t)=>({name:f.TreeItemActionType.RenderOverrideItem,children:[{name:f.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemContent,children:[{name:f.TreeItemActionType.RenderOverrideItemBody,children:[{name:f.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:f.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemDragHandle},{name:f.TreeItemActionType.RenderOverrideItemChildrenToggle},{name:f.TreeItemActionType.RenderOverrideItemIcon},{name:f.TreeItemActionType.RenderOverrideItemTitle},{name:f.TreeItemActionType.RenderOverrideItemDetailToggle},{name:f.TreeItemActionType.RenderOverrideItemCommands}]}]},{name:f.TreeItemActionType.RenderOverrideItemDetailLine}]}]}]}]})},D=(e,t)=>!!e&&(Array.isArray(e)?null==e?void 0:e.join().toLowerCase().includes(t):null==e?void 0:e.toLowerCase().includes(t)),j=["CreationDate","Creator","EditDate","Editor","GlobalID"],x=(0,o.Immutable)([o.DataSourceTypes.FeatureLayer,o.DataSourceTypes.SceneLayer,o.DataSourceTypes.BuildingComponentSubLayer,o.DataSourceTypes.OrientedImageryLayer,o.DataSourceTypes.ImageryLayer,o.DataSourceTypes.SubtypeSublayer]),M=(0,o.Immutable)([o.DataSourceTypes.WebMap,o.DataSourceTypes.WebScene,o.DataSourceTypes.MapService,o.DataSourceTypes.FeatureService,o.DataSourceTypes.SceneService,o.DataSourceTypes.GroupLayer,o.DataSourceTypes.BuildingGroupSubLayer,o.DataSourceTypes.BuildingSceneLayer,o.DataSourceTypes.SubtypeGroupLayer]),w=(e,t,n,s)=>{var r,c,d;const u=e.getSchema(),m=null==e?void 0:e.getLayerDefinition(),g=(null==u?void 0:u.fields)?Object.values(null==u?void 0:u.fields):[],p=(null==m?void 0:m.fields)||[];let I=g.filter((e=>!j.includes(e.jimuName))).map((e=>{const t=p.find((t=>t.name===e.jimuName)),a=null==t?void 0:t.editable;return Object.assign(Object.assign({},e),{editAuthority:a,editable:a,visible:!0})}));const b=null===(r=null==e?void 0:e.getPopupInfo())||void 0===r?void 0:r.fieldInfos;if("output"!==e.dataViewId&&b&&(null==b?void 0:b.length)>0){const e=[];b.forEach((t=>{(null==t?void 0:t.visible)&&e.push(t.fieldName)})),I=I.filter((t=>e.includes(t.name)))}(null==I?void 0:I.length)>50&&(I=I.slice(0,50));const y=s||e,f={dataSourceId:y.id,mainDataSourceId:null===(c=y.getMainDataSource())||void 0===c?void 0:c.id,dataViewId:y.dataViewId,rootDataSourceId:null===(d=y.getRootDataSource())||void 0===d?void 0:d.id},S=(0,o.Immutable)(f),v=I.map((e=>e.jimuName)),h=S.set("fields",v);return{id:t?e.id:n?n(e.id):e.id,name:e.getLabel(),useDataSource:h.asMutable({deep:!0}),allFields:g,tableFields:I,enableAttachments:!1,enableEdit:!1,allowCsv:!1,enableSearch:!1,searchFields:[],enableRefresh:!0,enableSelect:!0,enableDelete:!1,selectMode:a.Single,showCount:!0,headerFontSetting:{backgroundColor:"",fontSize:14,bold:!1,color:""},columnSetting:{responsiveType:l.Fixed,columnWidth:200},layerHonorMode:i.Webmap}},C=[o.JSAPILayerTypes.FeatureLayer,o.JSAPILayerTypes.SceneLayer,o.JSAPILayerTypes.BuildingComponentSublayer,o.JSAPILayerTypes.OrientedImageryLayer,o.JSAPILayerTypes.ImageryLayer,o.JSAPILayerTypes.SubtypeSublayer];function T(e){if(!e||!e.type)return!1;const t=e.type,a=t!==o.JSAPILayerTypes.BuildingComponentSublayer||t===o.JSAPILayerTypes.BuildingComponentSublayer&&e.view,i=C.includes(t);return a&&i}const N=e=>o.DataSourceManager.getInstance().getDataSource(e),R=e=>{const t=(null==e?void 0:e.type)===o.DataSourceTypes.SceneLayer||(null==e?void 0:e.type)===o.DataSourceTypes.BuildingComponentSubLayer;null==e||e.type,o.DataSourceTypes.OrientedImageryLayer,null==e||e.type,o.DataSourceTypes.ImageryLayer;let a;return a=t?e.getAssociatedDataSource():e,a};const z=e=>{const{layersConfig:t,activeIndex:a,failedDataSourceIds:i,onRemove:l,onSort:n,onClick:c}=e,d=o.hooks.useTranslation(s.defaultMessages,o.defaultMessages),u=t.length,m=o.React.useMemo((()=>t.asMutable({deep:!0}).map(((e,t)=>({itemStateDetailContent:e,itemKey:e.id,itemStateTitle:e.name,itemStateChecked:t===a,itemStateCommands:[{label:d("remove"),iconProps:()=>({icon:v(),size:12}),action:()=>{l(e.id)}}]})))),[a,t,l,d]),g=o.React.useMemo((()=>(0,o.jsx)(s.Alert,{variant:"text",form:"tooltip",size:"small",type:"error",text:d("dataSourceCreateError")})),[d]),p=o.React.useCallback(((e,t)=>{var a,l;const{itemJsons:n}=t.props,[o]=n,s=null===(l=null===(a=null==o?void 0:o.itemStateDetailContent)||void 0===a?void 0:a.useDataSource)||void 0===l?void 0:l.dataSourceId;return i.includes(s)||!N(s)?g:null}),[g,i]),I=o.React.useCallback(((e,t)=>{if("handleDidDrop"===e.updateType){const t=e.targetDropItemChildren.map((e=>e.itemKey));n(t)}}),[n]),b=o.React.useCallback(((e,t)=>{const{itemJsons:[a]}=t.props;c(a.itemKey)}),[c]),y=o.React.useMemo((()=>[{itemStateDetailContent:"......",itemKey:`${a}`,itemStateTitle:"......",itemStateChecked:!0,itemStateCommands:[]}]),[a]);return(0,o.jsx)(r.SettingRow,{className:"setting-ui-unit-list",css:o.css`
    display: block !important;
    &.setting-ui-unit-list {
      width: 100%;
      .tree-item {
        justify-content: space-between;
        align-items: center;
        font-size: 13px;
        &.tree-item_level-1 {
        }
        .jimu-checkbox {
          margin-right: 8px;
        }
      }
      .setting-ui-unit-list-new {
        padding-top: 4px;
      }
    }
  `},u>0&&(0,o.jsx)(f.List,Object.assign({className:"w-100",itemsJson:m,dndEnabled:!0,renderOverrideItemDetailToggle:p,onUpdateItem:I,onClickItemBody:b},h)),u===a&&(0,o.jsx)(f.List,Object.assign({className:"setting-ui-unit-list-new",itemsJson:y,dndEnabled:!1,renderOverrideItemDetailToggle:()=>""},h)))};var k=p(13089),P=p(1888),O=p(73529),A=p.n(O),L=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const W=e=>{const t=window.SVG,{className:a}=e,i=L(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:A()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var H=p(26490),E=p.n(H),B=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const Y=e=>{const t=window.SVG,{className:a}=e,i=B(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:E()},i)):o.React.createElement("svg",Object.assign({className:l},i))},F="root item for tree data entry",J=e=>o.css`
    .fields-list-header {
      background: ${e.ref.palette.neutral[300]};
      border-bottom: 1px solid ${e.ref.palette.neutral[600]};
      height: 34px;
      width: 100%;
      flex-wrap: nowrap;
      .jimu-checkbox {
        margin-top: 2px;
      }
      .fields-list-check {
        margin-left: 18px;
      }
    }
    .selected-fields-con{
      margin-top: 0 !important;
      .selected-fields-list {
        flex: 1;
        max-height: 300px;
        overflow-y: auto;
      }
      .jimu-tree-item{
        background: ${e.ref.palette.neutral[300]};
        border-bottom: 1px solid ${e.ref.palette.neutral[400]};
        .jimu-tree-item__content{
          div:first-of-type{
            padding-left: 2px;
          }
          .jimu-tree-item__body{
            background: ${e.ref.palette.neutral[300]};
            .jimu-tree-item__title{
              .jimu-input{
                width: 125px;
              }
            }
            .item-remove-button {
              padding: 0 2px; /** consistent with detail icon from tree. */
            }
            &:hover {
              background: none !important;
            }
          }
        }
      }
    }
  `,Q=(e,t)=>{let a=!1;for(const i of e)if(i.jimuName===t.jimuName){a=!0;break}return a},V=e=>{const{layerConfig:t,layerDefinition:a,isEditableDs:l,onChange:n}=e,{enableEdit:c,useDataSource:u,searchFields:m,tableFields:g,layerHonorMode:p}=t,[I,b]=o.React.useState(null),y=(0,P.useTheme)(),S=o.hooks.useTranslation(d,s.defaultMessages),v=l,x=null==a?void 0:a.capabilities,M=D(x,"update")&&v,w=o.React.useMemo((()=>g.asMutable({deep:!0})),[g]),C=o.React.useMemo((()=>{let e=0;return null==w||w.forEach((t=>{(null==t?void 0:t.editAuthority)&&e++})),e}),[w]),T=o.React.useMemo((()=>w.map((e=>e.jimuName))),[w]),R=o.React.useMemo((()=>!!w&&w.some((e=>!e.editAuthority&&e.editable))),[w]),z=o.React.useMemo((()=>{if(!w)return!1;const e=w.some((e=>e.editAuthority&&e.editable)),t=w.some((e=>!e.editAuthority&&e.editable));return e&&t}),[w]),O=o.React.useCallback(((e,t)=>{const a=((null==e?void 0:e.fields)||[]).find((e=>e.name===t));return!a||(null==a?void 0:a.editable)}),[]),A=o.React.useCallback((e=>{const t=N(null==u?void 0:u.dataSourceId),i=null==t?void 0:t.getSchema(),l=(null==i?void 0:i.fields)?Object.values(null==i?void 0:i.fields):[],n=e.map((e=>({itemKey:e.jimuName,itemStateChecked:!!c&&(null==e?void 0:e.editAuthority),itemStateTitle:e.alias||e.jimuName||e.name,itemStateIcon:k.dataComponentsUtils.getIconFromFieldType(e.type,y),itemStateDetailContent:e,itemStateDisabled:!Q(l,e),itemStateCommands:[],isCheckboxDisabled:!O(a,e.jimuName)})));b({itemKey:F,itemStateTitle:F,itemChildren:n})}),[c,y,null==u?void 0:u.dataSourceId,O,a]);o.React.useEffect((()=>{w&&A(w)}),[A,w]);const L=o.React.useCallback((e=>{n(t.set("layerHonorMode",e.target.value))}),[t,n]),H=o.React.useCallback((e=>{const t=e.map((e=>e.jimuName));return m.filter((e=>t.includes(e)))}),[m]),E=o.React.useCallback((e=>{var i;if(!e)return;const l=e.filter((e=>e));let o=w;const s=l.filter((e=>!w.find((t=>t.jimuName===e.jimuName))));for(const e of s){const t=((null==a?void 0:a.fields)||[]).find((t=>t.name===e.jimuName)),i=null==t?void 0:t.editable;o.push(Object.assign(Object.assign({},e.asMutable({deep:!0})),{editAuthority:i,editable:i,visible:!0}))}const r=w.filter((e=>!l.find((t=>t.jimuName===e.jimuName)))).map((e=>e.jimuName));o=o.filter((e=>!r.includes(e.jimuName)));const c=H(o),d=e.map((e=>e.jimuName)),u=null===(i=null==t?void 0:t.useDataSource)||void 0===i?void 0:i.set("fields",d);n(t.set("searchFields",c).set("tableFields",o).set("useDataSource",u)),A(o)}),[A,H,w,t,null==a?void 0:a.fields,n]),B=o.React.useCallback((()=>{const e=w;e.forEach((e=>{e.editable&&(e.editAuthority=R)})),n(t.set("tableFields",e)),A(e)}),[A,w,R,t,n]),V=o.React.useCallback((e=>{const a=e.target.checked,i=w.map((e=>Object.assign(Object.assign({},e),{editAuthority:e.editable})));n(t.set("enableEdit",a).set("tableFields",i))}),[t,w,n]),G=o.React.useCallback((e=>{const a=w.findIndex((t=>t.jimuName===e)),i=w[a].visible;w[a].visible=!i,n(t.set("tableFields",w))}),[w,t,n]),K=o.React.useCallback(((e,t)=>{e&&"Enter"===e.key&&G(t)}),[G]),Z=o.React.useCallback(((e,t)=>{const{itemJsons:a,itemJsons:[{itemStateDetailContent:i}]}=t.props,[l]=a,{jimuName:n}=(null==l?void 0:l.itemStateDetailContent)||{},r=w.find((e=>e.jimuName===n)),c=null==r?void 0:r.visible,d=S("visible"),u=S("invisible");return i?(0,o.jsx)(s.Button,{icon:!0,type:"tertiary",title:c?d:u,"aria-label":c?d:u,className:"jimu-tree-item__detail-toggle",onClick:e=>{e.stopPropagation(),G(n)},onKeyUp:e=>{K(e,n)},css:()=>o.css`
        &.jimu-tree-item__detail-toggle {
          display: flex;
          align-items: center;
          cursor: pointer;

          .icon-btn-sizer {
            margin: 0;
            min-width: 0.5rem;
            min-height: 0.5rem;
          }
        }
      `},c?(0,o.jsx)(W,null):(0,o.jsx)(Y,null)):null}),[S,G,K,w]),U=o.React.useCallback(((e,t)=>{var a,i,l;const{draggingItemJsons:n,targetItemJsons:o,dropType:s}=e,r=null===(a=o[0])||void 0===a?void 0:a.itemChildren,c=null===(i=o[Math.min(1,o.length-2)])||void 0===i?void 0:i.itemChildren,d=null===(l=n[0])||void 0===l?void 0:l.itemChildren;let u=!0;return"to-inside"!==s||r&&!d||(u=!1),"to-inside"!==s&&c&&d&&(u=!1),u}),[]),_=o.React.useCallback(((e,a)=>{var i;const{itemJsons:l,updateType:o}=e;if(c||o===f.TreeItemActionType.HandleDidDrop){const e=l[l.length-1];b(e);const a=null===(i=e.itemChildren)||void 0===i?void 0:i.map((e=>Object.assign(Object.assign({},e.itemStateDetailContent),{editAuthority:e.itemStateChecked})));n(t.set("tableFields",a))}}),[c,t,n]);return(0,o.jsx)(r.SettingSection,{title:S("configFields"),css:J(y)},(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(s.Select,{size:"sm",className:"w-100",value:p,onChange:L},(0,o.jsx)("option",{value:i.Webmap},S("layerHonorSetting")),(0,o.jsx)("option",{value:i.Custom},S("layerCustomize")))),p===i.Custom&&(0,o.jsx)(o.React.Fragment,null,(0,o.jsx)(r.SettingRow,{flow:"wrap",label:S("configTips")},(0,o.jsx)(k.FieldSelector,{useDataSources:u?(0,o.Immutable)([u]):(0,o.Immutable)([]),selectedFields:(0,o.Immutable)(T),isMultiple:!0,isDataSourceDropDownHidden:!0,useDropdown:!0,useMultiDropdownBottomTools:!0,hiddenFields:(0,o.Immutable)(j),onChange:E})),(0,o.jsx)(r.SettingRow,{flow:"wrap",label:c&&S("editableCount",{count:C})},(0,o.jsx)("div",{className:"fields-list-header form-inline"},(0,o.jsx)("div",{className:"d-flex w-100 fields-list-check"},c&&(0,o.jsx)(s.Checkbox,{id:"editAllField","data-field":"editAllField",onClick:B,checked:!R,indeterminate:z,title:R?`${S("editable")} (${S("checkAll")})`:`${S("editable")} (${S("uncheckAll")})`}),(0,o.jsx)(s.Label,{for:"editAllField",style:{cursor:"pointer"},className:"ml-2",title:S("field")},S("field"))))),(0,o.jsx)(r.SettingRow,{className:"selected-fields-con"},(0,o.jsx)(f.Tree,Object.assign({className:"selected-fields-list",rootItemJson:I,treeAlignmentType:f.TreeAlignmentType.Intact,dndEnabled:!0,isMultiSelection:c,renderOverrideItemDetailToggle:Z,isItemDroppable:U,onUpdateItem:_},h))),M&&(0,o.jsx)(r.SettingRow,null,(0,o.jsx)("div",{className:"d-flex w-100"},(0,o.jsx)(s.Checkbox,{id:"editable-cb","data-field":"enableEdit",onClick:V,checked:c}),(0,o.jsx)(s.Label,{for:"editable-cb",style:{cursor:"pointer"},className:"ml-2",title:S("enableEdit")},S("enableEdit"))))))};var G=p(41496),K=p(15562),Z=p(54337),U=p(778),_=p.n(U);const q=e=>{var t,a;const{layerConfig:i,onChange:n}=e,{columnSetting:c,headerFontSetting:u}=i,m=(0,P.useTheme2)(),g=o.hooks.useTranslation(d,s.defaultMessages,G.defaultMessages),p=o.React.useCallback(((e,t)=>{if(c)n(i.setIn(["columnSetting",e],t));else{const a={responsiveType:l.Fixed,columnWidth:200};a[e]=t,n(i.set("columnSetting",a))}}),[c,i,n]),I=o.React.useCallback(((e,t)=>{if(u)n(i.setIn(["headerFontSetting",e],t));else{const a={backgroundColor:"",fontSize:14,bold:!1,color:""};a[e]=t,n(i.set("headerFontSetting",a))}}),[u,i,n]);return(0,o.jsx)(r.SettingSection,{role:"group",title:g("tableOptions"),"aria-label":g("tableOptions")},(0,o.jsx)(r.SettingRow,{label:(0,o.jsx)("strong",null,g("columnSize")),flow:"wrap",role:"group","aria-label":g("columnSize")},(0,o.jsx)("div",{className:"jimu-builder--background-setting"},(0,o.jsx)("div",{role:"radiogroup"},(0,o.jsx)(s.Label,{className:"d-flex align-items-center"},(0,o.jsx)(s.Radio,{style:{cursor:"pointer"},name:"responsiveType",className:"mr-2",checked:(null==c?void 0:c.responsiveType)===l.Fit,onChange:()=>{p("responsiveType",l.Fit)}}),g("fitToData")),(0,o.jsx)(s.Label,{className:"d-flex align-items-center"},(0,o.jsx)(s.Radio,{style:{cursor:"pointer"},name:"displayOrderType",className:"mr-2",checked:(null==c?void 0:c.responsiveType)===l.Fixed,onChange:()=>{p("responsiveType",l.Fixed)}}),g("fixed"))),(null==c?void 0:c.responsiveType)===l.Fixed&&(0,o.jsx)(r.SettingRow,{label:g("columnWidth")},(0,o.jsx)(K.InputUnit,{style:{width:"35%"},"aria-label":g("columnWidth"),min:80,max:8192,value:{distance:null!==(t=null==c?void 0:c.columnWidth)&&void 0!==t?t:80,unit:s.DistanceUnits.PIXEL},onChange:({distance:e})=>{p("columnWidth",e)}})))),(0,o.jsx)(r.SettingRow,{label:(0,o.jsx)("strong",null,g("variableHeader")),flow:"wrap",role:"group","aria-label":g("variableHeader")},(0,o.jsx)("div",{className:"jimu-builder--background-setting"},(0,o.jsx)(r.SettingRow,{truncateLabel:!0,flow:"no-wrap",role:"group",label:g("font"),"aria-label":g("font"),className:"mt-2"},(0,o.jsx)(K.FontStyle,{"aria-label":g("fontStyle"),bold:null==u?void 0:u.bold,types:["bold"],onChange:I}),(0,o.jsx)(Z.ThemeColorPicker,{icon:_(),type:"with-icon",title:g("fontColor"),"aria-label":g("fontColor"),specificTheme:m,value:null==u?void 0:u.color,onChange:e=>{I("color",e)},className:"jimu-outline-inside"}),(0,o.jsx)(K.InputUnit,{style:{width:"35%"},"aria-label":g("fontSize"),min:12,max:99,value:{distance:null!==(a=null==u?void 0:u.fontSize)&&void 0!==a?a:14,unit:s.DistanceUnits.PIXEL},onChange:({distance:e})=>{I("fontSize",e)}})),(0,o.jsx)(r.SettingRow,{label:g("backgroundColor")},(0,o.jsx)(Z.ThemeColorPicker,{text:!0,specificTheme:m,"aria-label":g("backgroundColor"),value:null==u?void 0:u.backgroundColor,onChange:e=>{I("backgroundColor",e)}})))))};var $=p(68972);const X=e=>{const{widgetId:t,layerConfig:l,layerDefinition:n,isEditableDs:c,onChange:m}=e,{layerHonorMode:g,enableEdit:p,enableSelect:I,enableSearch:b,searchFields:y,searchExact:f,searchHint:S,selectMode:v,enableDelete:h,useDataSource:j}=l,x=o.hooks.useTranslation(d,s.defaultMessages,G.defaultMessages),M=null==n?void 0:n.capabilities,w=D(M,"delete")&&c,C=g===i.Custom?p&&w:w,T=o.React.useCallback((e=>{m(l.set("searchFields",e.map((e=>e.name))))}),[l,m]),N=o.React.useCallback((e=>{const t=e.target.value;S!==t&&m(l.set("searchHint",t))}),[S,l,m]),R=o.React.useCallback((()=>[(0,o.jsx)("option",{key:a.Single,value:a.Single},x("single")),(0,o.jsx)("option",{key:a.Multiple,value:a.Multiple},x("multiple"))]),[x]);return(0,o.jsx)(r.SettingSection,{role:"group",className:"last-setting-section",title:x("tools"),"aria-label":x("tools")},(0,o.jsx)(r.SettingRow,{tag:"label",label:x("enableSearch")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:b||!1,onChange:e=>{const a=e.target.checked;u.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:t,propKey:"optionChangeSuggestion",value:!0}),m(l.set("enableSearch",a))},"aria-label":x("enableSearch")})),b&&(0,o.jsx)($.Fragment,null,(0,o.jsx)(r.SettingRow,{flow:"wrap",label:x("searchFields")},(0,o.jsx)("div",{className:"w-100 search-container",style:{zIndex:3}},(0,o.jsx)(k.FieldSelectorWithFullTextIndex,{useDataSources:j?(0,o.Immutable)([j]):(0,o.Immutable)([]),onChange:T,selectedFields:y?(0,o.Immutable)(y):(0,o.Immutable)([]),isMultiple:!0,isDataSourceDropDownHidden:!0,useDropdown:!0,useMultiDropdownBottomTools:!0,widgetId:t,types:(0,o.Immutable)([o.JimuFieldType.Number,o.JimuFieldType.String]),"aria-label":x("searchFields")}))),(0,o.jsx)(r.SettingRow,{className:"w-100 d-flex justify-content-between"},(0,o.jsx)(s.Label,null,(0,o.jsx)(s.Checkbox,{style:{cursor:"pointer"},checked:f,"aria-label":x("fullMatch"),onChange:(e,t)=>{m(l.set("searchExact",t))}}),(0,o.jsx)("div",{className:"m-0 ml-2 flex-grow-1 omit-label"},x("fullMatch")))),(0,o.jsx)(r.SettingRow,{flow:"wrap",label:x("searchHint")},(0,o.jsx)(s.TextInput,{size:"sm",className:"search-placeholder w-100",placeholder:x("search"),value:S||"",onChange:N,"aria-label":x("searchHint")}))),["enableSelect","showCount","enableRefresh"].map(((e,t)=>(0,o.jsx)($.Fragment,{key:t},(0,o.jsx)(r.SettingRow,{tag:"label",label:x(e)},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:l[e]||!1,onChange:t=>{m(l.set(e,t.target.checked))},"aria-label":x(e)})),"enableSelect"===e&&I&&(0,o.jsx)(r.SettingRow,{flow:"wrap",label:x("selectMode"),className:"select-option"},(0,o.jsx)(s.Select,{size:"sm",value:v||a.Multiple,onChange:e=>{m(l.set("selectMode",e.target.value))},"aria-label":x("selectMode")},R()))))),C&&(0,o.jsx)(r.SettingRow,{tag:"label",label:x("deleteRecords")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:h||!1,onChange:e=>{m(l.set("enableDelete",e.target.checked))},"aria-label":x("deleteRecords")})))};var ee=function(e,t,a,i){return new(a||(a=Promise))((function(l,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function s(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((i=i.apply(e,t||[])).next())}))};const te=e=>{const{widgetId:t,layerConfig:a,isMapMode:i,layerDefinition:l,isEditableDs:n,isNewAdd:c,handleBatchAdd:u,onConfigSaved:m,getLayerModeConfigId:g,filterDs:p,onChange:I,onClose:b}=e,[y,f]=o.React.useState(""),[S,v]=o.React.useState(null),h=o.hooks.useTranslation(d,s.defaultMessages),D=o.ReactRedux.useSelector((e=>{var t,i,l,n,o,s;const r=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig,c=null==r?void 0:r.dataSources,d=null===(i=null==a?void 0:a.useDataSource)||void 0===i?void 0:i.dataSourceId;if(!d)return!1;const u=d.indexOf("-");if(u<0)return!1;const m=d.substring(0,u),g=d.substring(u+1),p=(null===(l=null==a?void 0:a.useDataSource)||void 0===l?void 0:l.rootDataSourceId)||m,I=null===(o=null===(n=null==c?void 0:c[p])||void 0===n?void 0:n.childDataSourceJsons)||void 0===o?void 0:o[g];if(!I)return!1;return(null===(s=null==I?void 0:I.query)||void 0===s?void 0:s.refreshInterval)>0})),j=o.hooks.usePrevious(D);o.React.useEffect((()=>{f((null==a?void 0:a.name)||"")}),[null==a?void 0:a.name]),o.React.useEffect((()=>{j!==D&&a&&I(a.set("updateText",D))}),[j,D,I,a]);const M=(null==a?void 0:a.useDataSource)?(0,o.Immutable)([a.useDataSource]):(0,o.Immutable)([]),C=o.React.useCallback((e=>ee(void 0,void 0,void 0,(function*(){if((null==e?void 0:e.length)>1){const t=[];for(const[a,l]of e.entries()){0===a&&v((0,o.Immutable)([e[0]]));try{const e=yield o.DataSourceManager.getInstance().createDataSourceByUseDataSource(l),a=(null==e?void 0:e.type)===o.DataSourceTypes.SceneLayer||(null==e?void 0:e.type)===o.DataSourceTypes.BuildingComponentSubLayer,n=R(e),s=w(n,i,g,a?e:void 0);t.push(s)}catch(e){console.error(e)}a===e.length-1&&v(null)}u((0,o.Immutable)(t)),m()}else{const t=null==e?void 0:e[0];if(!t)return;const l=a&&o.dataSourceUtils.areDerivedFromSameMain(t.dataSourceId,a.useDataSource.dataSourceId);try{v((0,o.Immutable)(e));const n=yield o.DataSourceManager.getInstance().createDataSourceByUseDataSource(t),s=(null==n?void 0:n.type)===o.DataSourceTypes.SceneLayer||(null==n?void 0:n.type)===o.DataSourceTypes.BuildingComponentSubLayer,r=R(n),c=l?((e,t,a,i)=>{var l,n;const s=i||e,r={dataSourceId:s.id,mainDataSourceId:null===(l=s.getMainDataSource())||void 0===l?void 0:l.id,dataViewId:s.dataViewId,rootDataSourceId:null===(n=s.getRootDataSource())||void 0===n?void 0:n.id},c=(0,o.Immutable)(r),d=t.tableFields.map((e=>e.jimuName)),u=c.set("fields",d),m=a?a(e.id):e.id;return Object.assign(Object.assign({},t.asMutable({deep:!0})),{id:m,name:e.getLabel(),useDataSource:u.asMutable({deep:!0})})})(r,a,g,s?n:void 0):w(r,i,g,s?n:void 0);I((0,o.Immutable)(c)),m()}catch(e){console.error(e)}finally{v(null)}}}))),[i,a,g,u,I,m]),T=o.React.useCallback((e=>{const t=e.target.value;f(t)}),[]),N=o.React.useCallback((e=>{(e=""===(e=null==e?void 0:e.trim())?null==a?void 0:a.name:e)!==y&&f(e),I(a.set("name",e))}),[y,a,I]);return(0,o.jsx)("div",{className:"w-100 h-100",css:o.css`
    .layer-config-panel {
      .panel-inner {
        .title {
          max-width: 70%;
        }
      }
      .setting-container {
        height: calc(100% - ${o.polished.rem(58)});
        overflow: auto;
      }
    }
  `},S&&(0,o.jsx)(s.Loading,{type:s.LoadingType.Secondary}),(0,o.jsx)("div",{className:"w-100 h-100 layer-config-panel"},(0,o.jsx)("div",{className:"w-100 d-flex px-4 py-0"},(0,o.jsx)(s.PanelHeader,{level:1,className:"px-0 py-4 panel-inner",showClose:!!b,onClose:b,title:h("layerConfig")})),(0,o.jsx)("div",{className:"setting-container"},(0,o.jsx)(r.SettingSection,{title:h("data"),className:"pt-0"},(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(k.DataSourceSelector,{types:x,disableRemove:()=>!0,disableDataSourceList:i,hideDataView:i,useDataSources:S||M,mustUseDataSource:!0,onChange:C,closeDataSourceListOnChange:!0,hideDs:p,isMultiple:c,isBatched:!0})),(S||M)&&D&&(0,o.jsx)(r.SettingRow,{tag:"label",label:h("updateText")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:void 0===(null==a?void 0:a.updateText)||a.updateText,onChange:e=>{I(a.set("updateText",e.target.checked))},"aria-label":h("updateText")}))),a&&(0,o.jsx)(o.React.Fragment,null,(0,o.jsx)(r.SettingSection,{title:h("label")},(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(s.TextInput,{size:"sm",type:"text",className:"w-100",value:y,onChange:T,onAcceptValue:N,"aria-label":h("label")}))),(0,o.jsx)(V,{layerConfig:a,layerDefinition:l,isEditableDs:n,onChange:I}),(0,o.jsx)(q,{layerConfig:a,onChange:I}),(0,o.jsx)(X,{widgetId:t,layerConfig:a,layerDefinition:l,isEditableDs:n,onChange:I})))))};class ae extends o.React.PureComponent{constructor(){super(...arguments),this.onDataSourceCreated=e=>{this.props.onDataSourceCreatedOrFailed(this.props.useDataSource.dataSourceId,e)},this.onCreateDataSourceFailed=e=>{this.props.onDataSourceCreatedOrFailed(this.props.useDataSource.dataSourceId,null)}}render(){return(0,o.jsx)(o.DataSourceComponent,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:this.onCreateDataSourceFailed})}}var ie=function(e,t,a,i){return new(a||(a=Promise))((function(l,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function s(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((i=i.apply(e,t||[])).next())}))};const le="NEW_LAYER_CONFIG_ID",ne=e=>{const{widgetId:t,config:a,useDataSources:i,onSettingChange:l}=e,{layersConfig:n}=a,[c,m]=o.React.useState(null),[g,p]=o.React.useState(!1),[I,b]=o.React.useState(!1),[f,S]=o.React.useState([]),[v,h]=o.React.useState({}),D=o.hooks.useTranslation(d,s.defaultMessages)("newSheet"),{OUTPUT_DATA_VIEW_ID:j}=o.CONSTANTS,w=o.React.useRef(null),C=o.React.useRef(null),T=o.React.useMemo((()=>c===le?n.length:n.findIndex((e=>e.id===c))),[c,n]),N=o.React.useMemo((()=>{const e=n.find((e=>e.id===c));return(0,o.Immutable)(e)}),[c,n]),k=o.React.useMemo((()=>v[c]),[c,v]),P=o.React.useCallback(((e,t)=>{const a=n.findIndex((t=>t.id===e));let i;i=t?w.current.getElementsByClassName("add-edit-btn")[0]:w.current.getElementsByClassName("jimu-tree-item__body")[a],C.current=i,e!==c||t?(p(!0),m(e)):(p(!1),m(null)),b(t)}),[c,n]),O=o.React.useCallback((()=>{P(le,!0)}),[P]),A=o.React.useCallback((e=>{P(e,!1),u.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:t,propKey:"activeTabId",value:e}),u.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:t,propKey:"settingChangeTab",value:!0})}),[P,t]),L=o.React.useCallback((()=>{p(!1),m(null)}),[]),W=o.React.useCallback((e=>{const i=a.layersConfig.filter((t=>t.id!==e));let n=a.set("layersConfig",i);0===i.length&&(n=n.set("description",""));const o=i.map((e=>{var t;return null===(t=e.useDataSource)||void 0===t?void 0:t.asMutable({deep:!0})}));l({id:t,config:n,useDataSources:null==o?void 0:o.asMutable({deep:!0})}),e===c&&L()}),[c,a,L,l,t]),H=o.React.useCallback((e=>{const i=e.map((e=>n.find((t=>t.id===e))));l({id:t,config:a.set("layersConfig",i)})}),[a,n,l,t]),E=o.React.useCallback((e=>{const s=T>-1?T:n.length;let r=i||(0,o.Immutable)([]);const c=e.useDataSource;if(r=r.map((e=>c.dataSourceId===e.dataSourceId?c:e)),N)(null==N?void 0:N.id)!==e.id&&(r=r.filter((e=>{var t;return e.dataSourceId!==(null===(t=null==N?void 0:N.useDataSource)||void 0===t?void 0:t.dataSourceId)})),r=r.concat(e.useDataSource));else{const t=r.findIndex((t=>t.dataSourceId===e.useDataSource.dataSourceId));if(t>-1){const a=r[t],i=((e,t)=>{if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){const a=Array.from(new Set(e.fields.asMutable().concat(t.fields.asMutable())));return e.merge(t.asMutable({deep:!0})).set("fields",a)}return e.merge(t.asMutable({deep:!0}))})(e.useDataSource,a),l=r.asMutable({deep:!0});r=(0,o.Immutable)(l.splice(t,1,i))}else r=r.concat(e.useDataSource)}l({id:t,config:a.setIn(["layersConfig",`${s}`],e),useDataSources:r.asMutable()}),m(e.id)}),[T,N,a,n.length,l,i,t]),B=o.React.useCallback((e=>{let s=i||(0,o.Immutable)([]);for(const t of e)s=s.concat(t.useDataSource);const r=n.concat(e);l({id:t,config:a.set("layersConfig",r),useDataSources:s.asMutable()}),m(e[0].id)}),[i,a,n,t,l]),Y=o.React.useCallback((()=>{b(!1)}),[b]),F=o.React.useCallback((e=>{const t=n.length>0?(e=>{const t=e.map((e=>e.id.split("-").reverse()[0]));return t.length>0?Math.max.apply(null,t):0})(n):0;return`${e}-${t+1}`}),[n]),J=o.React.useCallback(((e,t)=>ie(void 0,void 0,void 0,(function*(){const a=n.map((e=>e.id));if(t){const a=R(t),i=yield a.createJSAPILayerByDataSource(),l={id:e,dataSource:a,layer:i,layerDefinition:null==a?void 0:a.getLayerDefinition(),layerEditingEnabled:i.editingEnabled,isDsAutoRefresh:(null==a?void 0:a.getAutoRefreshInterval())>0,isEditableDs:(null==a?void 0:a.url)&&(null==a?void 0:a.dataViewId)!==j};h((t=>{var a;const i={};for(const o of n)(null===(a=null==o?void 0:o.useDataSource)||void 0===a?void 0:a.dataSourceId)===e?i[o.id]=l:t[o.id]&&(i[o.id]=t[o.id]);return i}))}else S((t=>[...t,e].filter((e=>a.includes(e)))))}))),[n,j]);return(0,o.jsx)(o.React.Fragment,null,n.map((e=>(0,o.jsx)(ae,{key:e.useDataSource.dataSourceId,useDataSource:e.useDataSource,onDataSourceCreatedOrFailed:J}))),(0,o.jsx)("div",{className:"mt-4",ref:w},(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(s.Button,{className:"w-100 add-edit-btn",type:"primary",onClick:O,title:D,"aria-label":D,"aria-describedby":"edit-blank-msg"},(0,o.jsx)("div",{className:"w-100 px-2 text-truncate"},(0,o.jsx)(y,{className:"mr-1 mb-1"}),D))),n.length>0&&(0,o.jsx)(z,{layersConfig:n,activeIndex:T,failedDataSourceIds:f,onRemove:W,onSort:H,onClick:A})),(0,o.jsx)(r.SidePopper,{position:"right",isOpen:g,toggle:L,trigger:null==w?void 0:w.current,backToFocusNode:C.current},(0,o.jsx)(te,{widgetId:t,layerConfig:N,isMapMode:!1,layerDefinition:null==k?void 0:k.layerDefinition,layerEditingEnabled:null==k?void 0:k.layerEditingEnabled,isDsAutoRefresh:null==k?void 0:k.isDsAutoRefresh,isEditableDs:null==k?void 0:k.isEditableDs,isNewAdd:I,handleBatchAdd:B,onConfigSaved:Y,getLayerModeConfigId:F,filterDs:e=>{let t=!1;if(M.includes(e.type)){const a=o.DataSourceManager.getInstance().getDataSource(e.id),i=(a.isDataSourceSet()?a.getAllChildDataSources():[]).filter((e=>x.includes(e.type)));0===(null==i?void 0:i.length)&&(t=!0)}return t},onChange:E,onClose:L})))};var oe=p(53195),se=p.n(oe),re=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const ce=e=>{const t=window.SVG,{className:a}=e,i=re(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:se()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var de=p(72529),ue=p.n(de),me=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const ge=e=>{const t=window.SVG,{className:a}=e,i=me(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:ue()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var pe=p(93303),Ie=p.n(pe),be=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const ye=e=>{const t=window.SVG,{className:a}=e,i=be(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:Ie()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var fe=p(30655),Se=p.n(fe),ve=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const he=e=>{const t=window.SVG,{className:a}=e,i=ve(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:Se()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var De=p(94064),je=p.n(De),xe=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const Me=e=>{const t=window.SVG,{className:a}=e,i=xe(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:je()},i)):o.React.createElement("svg",Object.assign({className:l},i))};var we=p(28996),Ce=p.n(we),Te=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const Ne=e=>{const t=window.SVG,{className:a}=e,i=Te(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:Ce()},i)):o.React.createElement("svg",Object.assign({className:l},i))},Re=e=>{var t;const{widgetId:a,layersConfig:i,onChange:l}=e,[n,c]=o.React.useState(""),[d,m]=o.React.useState(!1),[g,p]=o.React.useState(null),I=o.React.useRef(null),b=o.hooks.useTranslation(o.defaultMessages),{OUTPUT_DATA_VIEW_ID:y}=o.CONSTANTS,S=o.React.useMemo((()=>{const e=i.find((e=>e.id===n));return(0,o.Immutable)(e)}),[n,i]),v=o.React.useMemo((()=>{const e=N(n);return R(e)}),[n]),D=null==v?void 0:v.getLayerDefinition(),j=null===(t=null==v?void 0:v.layer)||void 0===t?void 0:t.editingEnabled,x=(null==v?void 0:v.getAutoRefreshInterval())>0,M=(null==v?void 0:v.url)&&(null==v?void 0:v.dataViewId)!==y,w=o.React.useMemo((()=>i.map((e=>({itemStateDetailContent:e,itemKey:e.id,itemStateChecked:e.id===n,itemStateTitle:e.name,itemStateCommands:[]}))).asMutable({deep:!0})),[n,i]),C=o.React.useMemo((()=>(0,o.jsx)(s.Alert,{variant:"text",form:"tooltip",size:"small",type:"error",text:b("dataSourceCreateError")})),[b]),T=o.React.useCallback(((e,t)=>{var a,i;const{itemJsons:l}=t.props,[n]=l,o=null===(i=null===(a=null==n?void 0:n.itemStateDetailContent)||void 0===a?void 0:a.useDataSource)||void 0===i?void 0:i.dataSourceId;return!!N(o)?null:C}),[C]),z=o.React.useCallback(((e,t)=>{const{itemJsons:[l]}=t.props,o=l.itemStateDetailContent;if(o.id===n)c(null),m(!1),p(null);else if(c(o.id),m(!0),u.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:a,propKey:"activeTabId",value:o.id}),u.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:a,propKey:"settingChangeTab",value:!0}),I.current){const e=i.findIndex((e=>e.id===o.id)),t=I.current.getElementsByClassName("jimu-tree-item__body")[e];p(t)}}),[n,i,a]),k=()=>{c(null),m(!1)};return(0,o.jsx)(r.SettingRow,null,(0,o.jsx)("div",{className:"w-100",ref:I},(0,o.jsx)(f.List,Object.assign({className:"py-1",itemsJson:w,dndEnabled:!1,renderOverrideItemDetailToggle:T,onClickItemBody:z},h))),(0,o.jsx)(r.SidePopper,{position:"right",isOpen:d,toggle:k,trigger:I.current,backToFocusNode:g},(0,o.jsx)(te,{widgetId:a,layerConfig:S,isMapMode:!0,layerDefinition:D,layerEditingEnabled:j,isDsAutoRefresh:x,isEditableDs:M,onChange:e=>{const t=i.findIndex((e=>e.id===n));l(o.Immutable.set(i,t,e),n)},onClose:k})))};var ze=function(e,t,a,i){return new(a||(a=Promise))((function(l,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function s(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((i=i.apply(e,t||[])).next())}))};const ke=()=>o.css`
  .map-title {
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .map-loading {
    position: relative;
    height: 16px;
    width: 16px;
  }
`,Pe=e=>{const{widgetId:t,jimuMapView:a,mapViewConfig:l=(0,o.Immutable)({}),useDataSources:n=(0,o.Immutable)([]),onChange:c}=e,u=(null==l?void 0:l.customizeLayers)||!1,m=(null==l?void 0:l.customJimuLayerViewIds)||(0,o.Immutable)([]),g=(null==l?void 0:l.layersConfig)||(0,o.Immutable)([]),[p,I]=o.React.useState(!1),[b,y]=o.React.useState(!1),[f,S]=o.React.useState([]),[v,h]=o.React.useState([]),[D,j]=o.React.useState(!1),x=o.React.useRef(null),M=o.hooks.useTranslation(s.defaultMessages,d),C="3d"===a.view.type,R=o.React.useMemo((()=>N(a.dataSourceId)),[a.dataSourceId]),z=o.React.useMemo((()=>{var e;return(null===(e=null==R?void 0:R.getLabel)||void 0===e?void 0:e.call(R))||""}),[R]),k=m.asMutable({deep:!0}),P=o.React.useMemo((()=>{const e=[];return f.forEach((t=>{const a="imagery"===t.type,i=null==t?void 0:t.getLayerDataSource(),l=null==i?void 0:i.getSchema();a&&!(null==l?void 0:l.fields)||e.push(t.id);t.getAllAncestorJimuLayerViews().forEach((t=>{const a="imagery"===t.type,i=null==t?void 0:t.getLayerDataSource(),l=null==i?void 0:i.getSchema();a&&!(null==l?void 0:l.fields)||e.push(t.id)}))})),v.forEach((t=>ze(void 0,void 0,void 0,(function*(){const i=a.getDataSourceIdByAPILayer(t),l=o.DataSourceManager.getInstance().getDataSource(i),n=a.getMapDataSource();let s=l;if(!l&&n)try{s=yield n.createDataSourceByLayer(t)}catch(e){console.log(e)}s&&e.push(t.id)})))),e}),[f,v,a]);o.React.useEffect((()=>{!function(){ze(this,void 0,void 0,(function*(){yield a.whenJimuMapViewLoaded();const e=yield a.whenAllJimuLayerViewLoaded(),t=a.getJimuTables().filter((e=>{var t;return null===(t=e.table)||void 0===t?void 0:t.visible}));let i=Object.values(e).filter((e=>!e.fromRuntime&&T(e)));const l=i.map((e=>e.createLayerDataSource()));try{yield Promise.all(l)}catch(e){console.log(e)}var n;a.isActive||(yield(n=500,new Promise((e=>{setTimeout((()=>{e()}),n)})))),i=i.filter((e=>!!e.getLayerDataSource()));const o=t.map((e=>e.table));S(i),h(o),I(!0)}))}()}),[a]);const O=o.React.useCallback((()=>{y(!0)}),[]),A=o.React.useCallback((()=>{j((e=>!e))}),[]),L=o.React.useCallback((()=>{y(!1)}),[]),W=(e,t)=>{var a;return e?Object.assign({dataSourceId:e.id,mainDataSourceId:e.getMainDataSource().id,dataViewId:e.dataViewId,rootDataSourceId:null===(a=e.getRootDataSource())||void 0===a?void 0:a.id},t?{useFieldsInPopupInfo:!0}:{}):null},H=o.React.useCallback(((e,t)=>ze(void 0,void 0,void 0,(function*(){let e=n.asMutable({deep:!0});const i=a.getAllJimuLayerViews().filter((e=>T(e))).filter((e=>null==e?void 0:e.isLayerVisible())),s=a.getJimuTables().filter((e=>{var t;return null===(t=e.table)||void 0===t?void 0:t.visible}));if(t){const t=i.map((e=>e.id)),n=s.map((e=>e.jimuTableId)),r=t.concat(n),d=[];for(const t of i){if(null==t?void 0:t.fromRuntime)continue;let a;try{a=yield t.getOrCreateLayerDataSource()}catch(e){continue}if(!a)continue;const i=w(a,!0),l="imagery"===t.type,n=null==a?void 0:a.getSchema();if(l&&!(null==n?void 0:n.fields))continue;d.push(i);const o=W(a,!0);e=Oe(e,"add",o)}for(const t of s){const i=t.table,l=a.getDataSourceIdByAPILayer(i),n=o.DataSourceManager.getInstance().getDataSource(l),s=a.getMapDataSource();let r=n;if(!n&&s)try{r=yield s.createDataSourceByLayer(i)}catch(e){continue}if(!r)continue;const c=w(r,!0);d.push(c);const u=W(r,!0);e=Oe(e,"add",u)}c(a.id,l.set("customizeLayers",!0).set("customJimuLayerViewIds",r).set("layersConfig",d),e)}else{for(const t of i){let a;try{a=yield t.getOrCreateLayerDataSource()}catch(e){continue}if(!a)continue;const i="imagery"===t.type,l=null==a?void 0:a.getSchema();if(i&&!(null==l?void 0:l.fields))continue;const n=W(a,!0);e=Oe(e,"remove",n)}for(const t of s){const i=t.table,l=a.getDataSourceIdByAPILayer(i),n=o.DataSourceManager.getInstance().getDataSource(l),s=a.getMapDataSource();let r=n;if(!n&&s)try{r=yield s.createDataSourceByLayer(i)}catch(e){continue}if(!r)continue;const c=W(r,!0);e=Oe(e,"remove",c)}e&&0===e.length&&(e=void 0),c(a.id,l.set("customizeLayers",!1).set("customJimuLayerViewIds",[]).set("displayRuntimeLayers",!0).set("layersConfig",[]),e)}}))),[n,a,l,c]),E=o.React.useCallback((e=>!P.includes(e.id)),[P]),B=o.React.useCallback((e=>!f.includes(e)),[f]),Y=o.React.useCallback((e=>ze(void 0,void 0,void 0,(function*(){var t;const i=a.jimuLayerViews,s=a.jimuTables,r=e.map((e=>{var t;return(null===(t=null==i?void 0:i[e])||void 0===t?void 0:t.layerDataSourceId)||a.getDataSourceIdByAPILayer(null==s?void 0:s[e])}));let d=g.filter((e=>r.includes(e.id)));const u=e.filter((e=>{var t;const l=(null===(t=null==i?void 0:i[e])||void 0===t?void 0:t.layerDataSourceId)||a.getDataSourceIdByAPILayer(null==s?void 0:s[e]);return l&&!g.find((e=>e.id===l))})),m=[];for(const e of u){const t=null==i?void 0:i[e],l=null==s?void 0:s[e];let n;if(t)try{n=yield t.getOrCreateLayerDataSource()}catch(e){console.log(e)}else if(l){const e=a.getDataSourceIdByAPILayer(l),t=o.DataSourceManager.getInstance().getDataSource(e),i=a.getMapDataSource();if(n=t,!t&&i)try{n=yield i.createDataSourceByLayer(l)}catch(e){console.log(e)}}n&&m.push(w(n,!0))}d=d.concat(m);const p=null===(t=null==l?void 0:l.customJimuLayerViewIds)||void 0===t?void 0:t.asMutable({deep:!0}),{add:I,remove:b,diff:y}=((e,t)=>{const a=[],i=[];return e.forEach((e=>{t.includes(e)||i.push(e)})),t.forEach((t=>{e.includes(t)||a.push(t)})),{add:a,remove:i,diff:a.concat(i)}})(p,e);let f=n.asMutable({deep:!0});for(const e of y){const t=i[e],l=s[e];let n;if(t)n=t.getLayerDataSource();else if(l){const e=a.getDataSourceIdByAPILayer(l),t=o.DataSourceManager.getInstance().getDataSource(e),i=a.getMapDataSource();n=t,!t&&i&&(n=yield i.createDataSourceByLayer(l))}const r=W(n,!0);I.includes(e)?f=Oe(f,"add",r):b.includes(e)&&(f=Oe(f,"remove",r))}c(a.id,l.set("customJimuLayerViewIds",e).set("layersConfig",d),f)}))),[a,n,g,l,c]),F=o.React.useCallback(((e,t)=>{let o=n.asMutable({deep:!0});const s=e.find((e=>e.id===t));if(s){const e=o.findIndex((e=>{var t;return e.dataSourceId===(null===(t=s.useDataSource)||void 0===t?void 0:t.dataSourceId)}));if(s.layerHonorMode===i.Custom){const t=s.tableFields.map((e=>e.jimuName));o[e].fields=t,o[e].useFieldsInPopupInfo=!1}else o[e].fields=[],o[e].useFieldsInPopupInfo=!0}o=Oe(o,"update"),c(a.id,l.set("layersConfig",e),o)}),[n,a.id,l,c]);return(0,o.jsx)(o.React.Fragment,null,(0,o.jsx)(r.SettingRow,{flow:"no-wrap",css:ke},C?(0,o.jsx)(ge,{size:16}):(0,o.jsx)(ce,{size:16}),(0,o.jsx)("div",{className:"map-title px-2",title:z,"aria-label":z},z),!p&&(0,o.jsx)("div",{className:"map-loading"},(0,o.jsx)(s.Loading,{type:"DONUT"})),p&&0===f.length&&0===v.length&&(0,o.jsx)(s.Tooltip,{title:M("noAvailableLayers"),showArrow:!1,placement:"top"},(0,o.jsx)("span",null,(0,o.jsx)(s.Button,{className:"border-0",disabled:!p,type:"tertiary",icon:!0,size:"sm"},(0,o.jsx)(Ne,{size:16,color:"var(--sys-color-warning-main)"})))),p&&(f.length>0||v.length>0)&&(0,o.jsx)(o.React.Fragment,null,(0,o.jsx)(s.Tooltip,{title:M("selectLayers"),showArrow:!1,placement:"top"},(0,o.jsx)("span",null,(0,o.jsx)(s.Button,{ref:x,className:"map-layers-setting-btn mr-1 p-0 border-0",disabled:!p,type:"tertiary",icon:!0,size:"sm",onClick:O},(0,o.jsx)(ye,{size:16})))),u&&g.length>0&&(0,o.jsx)(s.Button,{className:"layer-list-toggle-btn p-0 border-0",type:"tertiary",icon:!0,size:"sm",onClick:A},D?(0,o.jsx)(Me,{size:16}):(0,o.jsx)(he,{size:16})))),D&&g.length>0&&(0,o.jsx)(Re,{widgetId:t,layersConfig:g,onChange:F}),b&&(0,o.jsx)(r.SidePopper,{isOpen:!0,toggle:L,position:"right",trigger:x.current,title:M("selectLayers")},(0,o.jsx)(r.SettingRow,{tag:"label",className:"w-100 pl-4 pr-4",label:M("customizeLayers")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:u,"data-key":"customizeLayers",onChange:H,"aria-label":M("customizeLayers")})),u&&(0,o.jsx)(o.React.Fragment,null,(0,o.jsx)(r.SettingRow,{className:"w-100 pl-4 pr-4",label:z,"aria-label":z}),(0,o.jsx)("div",{className:"select-jimu-layer-view-selector-container p-4"},(0,o.jsx)(r.JimuLayerViewSelector,{jimuMapViewId:a.id,isMultiSelection:!0,selectedValues:k,isShowTables:!0,hideLayers:E,disableLayers:B,onChange:Y})))))};const Oe=(e,t,a)=>{let i=e||[];"remove"===t?i=i.filter((e=>e.dataSourceId!==a.dataSourceId)):"add"===t&&a&&!i.find((e=>e.dataSourceId===a.dataSourceId))?i=i.concat([a]):"update"===t&&(i=e);const l="remove"===t?[]:void 0;return i.length>0?i:l},Ae=e=>{const{widgetId:t,config:a,useMapWidgetIds:i,mapEmpty:l,jimuMapViews:n,useDataSources:c,onSettingChange:d}=e,{mapViewsConfig:u}=a,m=(null==i?void 0:i.length)>0,g=o.hooks.useTranslation(s.defaultMessages),p=o.React.useCallback(((e,i,l)=>{d({id:t,config:a.setIn(["mapViewsConfig",e],i),useDataSources:l})}),[a,d,t]);return(0,o.jsx)(o.React.Fragment,null,(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(r.MapWidgetSelector,{useMapWidgetIds:i,onSelect:e=>{const i=a.set("mapViewsConfig",{});d({id:t,config:i,useMapWidgetIds:e})}})),m&&!l&&n.map((e=>(0,o.jsx)(Pe,{widgetId:t,key:e.id,jimuMapView:e,mapViewConfig:null==u?void 0:u[e.id],useDataSources:c,onChange:p}))),m&&l&&(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(s.Alert,{tabIndex:0,type:"warning",className:"warningMsg",open:!0,text:g("noWebMapWebSceneTip")})))},Le=e=>o.css`
  &.arrange-style-container {
    .arrange_container {ß
      margin-top: 10px;
      display: flex;
      .jimu-btn {
        padding: 0;
        background: ${e.ref.palette.neutral[300]};
        &.active {
          border: 2px solid ${e.sys.color.primary.light};
        }
      }
      .icon-size {
        width: 109px;
        height: 70px;
      }
    }
  }
`,We=e=>{const{config:a,onPropertyChange:i}=e,{arrangeType:l}=a,n=(0,P.useTheme)(),c=o.hooks.useTranslation(d,s.defaultMessages);return(0,o.jsx)(r.SettingSection,{role:"group",className:"arrange-style-container",title:c("sheetStyle"),"aria-label":c("sheetStyle"),css:Le(n)},(0,o.jsx)(r.SettingRow,{className:"arrange_container"},(0,o.jsx)(s.Tooltip,{title:c("tabs"),placement:"bottom"},(0,o.jsx)(s.Button,{onClick:()=>{i("arrangeType",t.Tabs)},icon:!0,size:"sm",type:"tertiary",active:l===t.Tabs,"aria-pressed":l===t.Tabs},(0,o.jsx)(s.Icon,{autoFlip:!0,className:"icon-size",icon:p(79226)}))),(0,o.jsx)(s.Tooltip,{title:c("dropdown"),placement:"bottom"},(0,o.jsx)(s.Button,{onClick:()=>{i("arrangeType",t.Dropdown)},className:"ml-2",icon:!0,size:"sm",type:"tertiary",active:l===t.Dropdown,"aria-pressed":l===t.Dropdown},(0,o.jsx)(s.Icon,{autoFlip:!0,className:"icon-size",icon:p(8377)})))))};var He=p(31027),Ee=p.n(He),Be=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const Ye=e=>{const t=window.SVG,{className:a}=e,i=Be(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",a);return t?o.React.createElement(t,Object.assign({className:l,src:Ee()},i)):o.React.createElement("svg",Object.assign({className:l},i))},Fe=e=>o.css`
    &.empty-placeholder {
      display: flex;
      flex-flow: column;
      justify-content: center;
      height: calc(100% - 255px);
      overflow: hidden;
      .empty-placeholder-inner {
        padding: 0px 20px;
        flex-direction: column;
        align-items: center;
        display: flex;
        .empty-placeholder-text {
          color: ${e.ref.palette.neutral[1e3]};
          font-size: 14px;
          margin-top: 16px;
          text-align: center;
        }
        .empty-placeholder-icon {
          color: ${e.ref.palette.neutral[800]};
        }
      }
    }
  `,Je=e=>{const{isMapMode:t}=e,a=o.hooks.useTranslation(d,s.defaultMessages),i=(0,P.useTheme)(),l=a("newSheet"),n=t?a("noMapSelectedTips"):a("tableBlankStatus",{SheetString:l});return(0,o.jsx)("div",{className:"empty-placeholder w-100",css:Fe(i)},(0,o.jsx)("div",{className:"empty-placeholder-inner"},(0,o.jsx)("div",{className:"empty-placeholder-icon"},(0,o.jsx)(Ye,{size:48})),(0,o.jsx)("div",{className:"empty-placeholder-text",id:"edit-blank-msg"},n)))},Qe=e=>{const{config:t,onPropertyChange:a}=e,{enableMapExtentFilter:i,defaultExtentFilterEnabled:l,enableAttachments:n}=t,c=o.hooks.useTranslation(d,s.defaultMessages);return(0,o.jsx)(r.SettingSection,{role:"group",title:c("tools"),"aria-label":c("tools")},(0,o.jsx)(r.SettingRow,{tag:"label",label:c("enableMapExtentFilter")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:i,"data-key":"enableMapExtentFilter",onChange:e=>{a("enableMapExtentFilter",e.target.checked)},"aria-label":c("enableMapExtentFilter")})),i&&(0,o.jsx)(r.SettingRow,null,(0,o.jsx)(s.Label,{className:"d-flex align-items-center"},(0,o.jsx)(s.Checkbox,{checked:l,className:"mr-1",onChange:e=>{a("defaultExtentFilterEnabled",e.target.checked)}}),c("defaultEnabled"))),(0,o.jsx)(r.SettingRow,{tag:"label",label:c("enableAttachments")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:n,"data-key":"enableAttachments",onChange:e=>{a("enableAttachments",e.target.checked)},"aria-label":c("enableAttachments")})))},Ve=e=>{const{config:t,onPropertyChange:a}=e,{enableAttachments:i}=t,l=o.hooks.useTranslation(d,s.defaultMessages);return(0,o.jsx)(r.SettingSection,{role:"group",title:l("tools"),"aria-label":l("tools")},(0,o.jsx)(r.SettingRow,{tag:"label",label:l("enableAttachments")},(0,o.jsx)(s.Switch,{className:"can-x-switch",checked:i,"data-key":"enableAttachments",onChange:e=>{a("enableAttachments",e.target.checked)},"aria-label":l("enableAttachments")})))};var Ge=function(e,t,a,i){return new(a||(a=Promise))((function(l,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function s(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((i=i.apply(e,t||[])).next())}))};const Ke=t=>{const{id:a,config:i,useDataSources:l,useMapWidgetIds:n,onSettingChange:u}=t,{tableMode:m,layersConfig:g=(0,o.Immutable)([]),mapViewsConfig:p=(0,o.Immutable)({})}=i,[I,b]=o.React.useState(!1),[y,f]=o.React.useState(!1),[S,v]=o.React.useState([]),h=o.React.useRef(null),D=window.isExpressBuilder,j=m===e.Map,x=(null==n?void 0:n.length)>0,M=!j&&g.length>0||j&&p&&Object.keys(p).length>0,w=o.hooks.useTranslation(d,s.defaultMessages),C=o.React.useCallback(((e,t)=>{if(t===i[e])return;const l=i.set(e,t);u({id:a,config:l})}),[i,u,a]),T=o.React.useCallback((()=>{u({id:a,config:i.set("tableMode",h.current).set("layersConfig",[]).set("mapViewsConfig",{}).set("enableMapExtentFilter",h.current===e.Map).set("defaultExtentFilterEnabled",!1),useDataSources:h.current===e.Map?void 0:[]}),h.current=null,b(!1)}),[i,u,a]),N=o.React.useCallback((e=>{m!==e&&(h.current=e,M?b(!0):T())}),[m,T,M]),R=o.React.useCallback((e=>{v([]);const t=Object.values(e);1!==Object.keys(t).length||Object.values(t)[0].dataSourceId?f(!1):f(!0);const a=Object.values(e).map((e=>Ge(void 0,void 0,void 0,(function*(){yield e.whenJimuMapViewLoaded(),yield e.whenAllJimuLayerViewLoaded()}))));Promise.allSettled(a).then((()=>{v(t)}))}),[f]);return(0,o.jsx)("div",{className:"h-100"},(0,o.jsx)("div",{className:"jimu-widget-setting widget-setting-table h-100"},(0,o.jsx)(r.SettingSection,{role:"group",title:w("mode")},(0,o.jsx)("div",{role:"radiogroup",className:"mb-4"},(0,o.jsx)(s.Label,{className:"d-flex align-items-center"},(0,o.jsx)(s.Radio,{style:{cursor:"pointer"},name:"editModeType",className:"mr-2",checked:!j,onChange:()=>{N(e.Layer)}}),w("selectLayers")),(0,o.jsx)(s.Label,{className:"d-flex align-items-center"},(0,o.jsx)(s.Radio,{style:{cursor:"pointer"},name:"editModeType",className:"mr-2",checked:j,onChange:()=>{N(e.Map)}}),w("interactWithMap"))),!j&&(0,o.jsx)(ne,{widgetId:a,config:i,useDataSources:l,onSettingChange:u}),j&&(0,o.jsx)(Ae,{widgetId:a,config:i,useMapWidgetIds:n,mapEmpty:y,jimuMapViews:S,useDataSources:l,onSettingChange:u})),j&&x&&!y&&(0,o.jsx)(Qe,{config:i,onPropertyChange:C}),!j&&M&&(0,o.jsx)(Ve,{config:i,onPropertyChange:C}),(0,o.jsx)(We,{config:i,onPropertyChange:C}),!j&&!M&&!D&&(0,o.jsx)(Je,{isMapMode:!1}),j&&!x&&!D&&(0,o.jsx)(Je,{isMapMode:!0}),j&&(0,o.jsx)(c.JimuMapViewComponent,{useMapWidgetId:null==n?void 0:n[0],onViewsCreate:R}),I&&(0,o.jsx)(s.ConfirmDialog,{level:"warning",title:w("changeModeConfirmTitle"),hasNotShowAgainOption:!1,content:w("changeModeConfirmTips"),onConfirm:T,onClose:()=>{b(!1)}})))};function Ze(e){p.p=e}})(),I})())}}}));